<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Ember.js</title>

    <meta name="description" content="Ember.js workshop">
    <meta name="author" content="Eirik Lied">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/default.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        
        <section>
            <h1>Ember.js</h1>
            <p><small>
              <a href="http://eiriklied.github.io/ember-workshop/">eiriklied.github.io/ember-workshop</a></small>
            </p>
        </section>
        
        <section data-markdown>
          <script type="text/template">
              ## Today

              slides
              
              code examples
              
              coding!
          </script>
        </section>

        <section data-markdown>
            <script type="text/template">
              <img src="images/ember.png"/>

              > A framework for creating ambitious web applications
              
              > Makes trivial choices for you
              
              > Lets you start fast
              
              > Structure to grow big
            </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            <img src="https://1.gravatar.com/avatar/f711c56f2403ef4d43b56bb87ca52af2?s=240"/>

            > Ember rookie

          </script>
        </section>

        <section data-markdown>
            <script type="text/template">
              ## Ember

              Super friendly website: [emberjs.com](http://emberjs.com)

              Community with lots of traction
              
              More than 8000 stargazers

              Just released 1.0
            </script>
        </section>


        <section data-markdown>
            <script type="text/template">
            ## Ember is big

            - Some pieces today
            - Stay away from ember-data!
            </script>
        </section>
        
        <section>
          <h2>Hello world</h2>
          <p>Enterprise Version&trade;</p>
        </section>

        <section data-markdown>
            <script type="text/template">
              # Router
            </script>
        </section>

        <section data-markdown>
            <script type="text/template">
            An application gets many states
            
            A URL should represent the state

            Ember Router specifies the applications URLs
            </script>
        </section>

        <section>
          <pre>
            <code class="javascript">
            // router.js
            App.Router.map(function() {
              this.route('about'); 
              this.resource('dogs', { path: '/pets'}, function() {
                this.resource('dog', { path: '/:dog_id'});
              });
            });
            </code>
          </pre>
        </section>

        <section data-markdown>
          <script type="text/template">
          ```javascript
          // general route, words describing nouns
          this.route('terms-of-use');

          // nouns
          this.resource('dogs')

          ```
          </script>
        </section>

        <section data-markdown>
            <script type="text/template">
              ## What&#39;s in a name..

              
              `this.route('about');`
            </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            - Ember will look for
              - `AboutRoute`
              - `AboutController`
              - `about.hbs`
            
            - You don&#39;t _have_ to implement them
              - Ember will use them if you do
            - Dont worry too much about it now!
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Nested routes
            
            - We can nest routes, but this changes the behaviour of what Ember will look for
              
              ```javascript
                this.resource('dogs', function() { // index
                  this.route('show') // show
                })
              ```
            - Ember will look for
              - `DogsIndexRoute, DogsShowRoute`
              - `DogsIndexController, DogsShowController`
              - `dogs/index.hbs, dogs/show.hbs`

          </script>
        </section>

        <section>
          <h2>Real example!</h2>
        </section>

        <section data-markdown>
          <script type="text/template">
            # Hacking time!
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Challenge 1
            
            [github.com/eiriklied/ember-workshop](https://github.com/eiriklied/ember-workshop)

            1. Get rails app up and running (see readme)
            1. Create a layout with an `outlet` in application.hbs
              - If you want some static html that looks good, look at [localhost:3000/static](http://localhost:3000/static)
            1. Create a route `about` with a simple template that contains some text
            1. Create a route `messages` that has a neste route `new`
            1. Open the Ember inspector in Chrome and verify that you see the routes there
            1. Add the missing templates for `messages`
            1. Create menu items that links to `#/about` and `#/messages` 
      
            
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            # Routes 

            (not Router&trade;)
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            - The router handles URLs
            - A URL needs us to load a given state
            - Ember Routes should load the data needed to get to that state
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
          ```javascript
            // routes.js
            this.resource('dogs');

            // routes/dogs-route.js
            App.DogsRoute = Ember.Route.extend({

              // This callback is run when the correct route is triggered!
              // It should return one model or an array of models
              model: function() {
                return [
                  { name: 'Fido'  },
                  { name: 'Pluto' }
                ];
              }
            });
          ```

          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            # Templating
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            Ember uses Handlebars:  
            [handlebarsjs.com](http://handlebarsjs.com)

          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Properties

            From model or controller

            ```html
            <p>
              Your name: {{firstName}} {{lastName}}
            </p>
            ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Conditionals

            ```html
            {{#if person}}
              Welcome back, {{person.firstName}} {{person.lastName}}!
            {{else}}
              You must sign in
            {{/if}}
            ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Loops

            Specify context

            ```html
            <ul>
              {{#each person in model}}
                <li>Hello, {{person.name}}!</li>
              {{/each}}
            </ul>
            ```

            Implicit context

            ```html
            <ul>
              {{#each}}
                <li>Hello, {{name}}!</li>
              {{/each}}
            </ul>
            ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Helpers

            `link-to`

            ```javascript
            // you find the routes name in the Ember inspector!
            {{#link-to 'dogs.new'}}The page{{/link-to}}
            ```

          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Helpers

            `input`

            ```javascript
            // will create inputs that are bound to model values name and body
            {{#input type="text"     name="name" value=name}}
            {{#input type="textarea" name="body" value=body}}
            ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Actions

            ```html
            <!-- 
              Trigger action 'startSignup' in controller or route
              with name as parameter
             -->
            <button {{action 'startSignup' name}}>Sign up!</button>
            ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Challenge 2

            1. Use the `link-to` helper for the links you have in the menu
            1. Create a MessagesIndexRoute and deliver an array of data with `name`, `message`, `body` and `created_at` (a date formatted string) for each item.
            1. Build the `messages/index.hbs` template using the supplied model data
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            # Data
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
          We want to load some real data
          
          Ember Data? 

          Not a good idea yet
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
          # jQuery
          
          Something we know at least :)
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
          ```javascript
          App.DogsIndexRoute = Ember.Route.extend({
            model: function() {
              return Ember.$.getJSON('/dogs.json');
            }
          });
          ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
          ## But thats async??
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
          ## Ember works great with promises :)
          
          - `model` function returns a promise, 
          - Ember will load the template when the model is ready

          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
          ## Challenge 3

          1. The rails app delivers data on `/api/messages.json`
          1. Make your route fetch real data
            - Remember to transform data from the server if necessary!
            - hint: `.then()` is perfect for that
          1. Make sure your template displays the data from the server!

          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
          # Handlebar helpers
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
          ## Helpers

          - `#link-to` is a helper
          - We can create more helpers super easy!
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Helpers

            ```javascript
            // in helpers folder:
            Ember.Handlebars.helper('my-helper', function(param, options) {
              // The return value is HTML escaped by default 
              // to avoid XSS problems.
              // If you need to output HTML, you can do this:
              // return new Handlebars.SafeString(myString);
              return "my processed value";
            });
            ```

            ```html
            <!-- in .hbs template: -->
            <h1>{{helper-name 'parameter'}}<!h1>
            ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Challenge 4

            1. The app has moment.js installed
            1. Create a helper format-date so you can call `{{format-date created_at}}` to display a pretty time
              - Hint: `moment(myTimeString).fromNow();`

            1. The app has md5 hashing algorithm installed
            1. Create a helper so you can call `{{gravatar email}}` to display an image tag with a gravatar from an email address.
              - Hint: `CryptoJS.MD5(email).toString();`

          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            # Controllers
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            - After a route has been set up, the routes template is rendered
            - The template gets properties from a controller, NOT the model
            - The controller decorates the model
          </script>
        </section>

        <section>
          <img src="images/template-controller-model.png" style="background-color:#fff;">
        </section>

        <section data-markdown>
          <script type="text/template">
          ## Controllers can

          - Decorate model
          - Receive actions
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
          ```javascript
            // controller
            App.FooController = Ember.ObjectController.extend({
              myProperty: { name: 'Eirik' },
              actions: {
                redirect: function(){ 
                  doSomethingWith(myProperty);
                  this.transitionToRoute('dogs.new'); 
                }
              }
            });
          ```

          ```html
          <!-- use properties from the controller -->
          <p>{{myProperty.name}}</p>

          <!-- trigger actions on the controller -->
          <button {{action 'redirect'}}>Click me</button>
          ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Challenge 5

            1. Create a link to `#/messages/new`
            1. Build a form with fields `email`, `name` and `body`
            1. Trigger an action on MessagesNewController that saves the values to the server.
              - Hint: The server expects http post params on the form
              ```javascript
                // posted to /messages.json
                { message: 
                    {
                      email: 'sadasd',
                      name: 'asdasd',
                      body: 'sadasd'
                    }
                }
              ```
            1. On the messages/new page: show a preview of the message you are writing that updates live!



          </script>
        </section>

<!--
        <section data-markdown>
          <script type="text/template">
          </script>
        </section>
-->


    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
        ]
      });

    </script>

  </body>
</html>
